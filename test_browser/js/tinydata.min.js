(function(){if(!this.require){var t={},e={},n=function(o,s){var _,u=i(s,o),l=e[u];if(l)return l.exports;if(!(_=t[u]||t[u=i(u,"./index")]))throw"module '"+o+"' not found";l={id:u,exports:{}};try{return e[u]=l,_(l.exports,function(t){return n(t,r(u))},l),l.exports}catch(a){throw delete e[u],a}},i=function(t,e){var n,i,r=[];n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var o=0,s=n.length;s>o;o++)i=n[o],".."==i?r.pop():"."!=i&&""!=i&&r.push(i);return r.join("/")},r=function(t){return t.split("/").slice(0,-1).join("/")};this.require=function(t){return n(t,"")},this.require.define=function(e){for(var n in e)t[n]=e[n]}}return this.require.define}).call(this)({"lib/regexp_dot_forger":function(t,e,n){(function(){var t,i,r,o,s=[].slice;i=function(t){return function(){var e,n;return e=arguments.length>=1?s.call(arguments,0):[],n=t.apply(this,e),this._do_logging_&&console.log(""+e[0]+" -> "+n),n}},r=null!=(o=this._)?o:e("lodash"),t=function(){function t(t,e){if(this._dot_substitute_=t,this._options_=null!=e?e:{},null==this._dot_substitute_||!r.isString(this._dot_substitute_))throw Error("constructor must be called with string as dot substitute, but got:\n|dot_substitute| = |"+this._dot_substitute_+"|");this._do_logging_=null!=this._options_.log&&this._options_.log===!0&&null!=("undefined"!=typeof console&&null!==console?console.log:void 0)?!0:!1}return t.prototype.getPatternByName=function(t){switch(t.toUpperCase()){case"CHARACTER_SET":return/((?:^|(?:(?:^|[^\\])\\(?:\\{2})*\\)|[^\\]+))(\[(?:]|(?:[^\\]+])|(?:.*?[^\\]+])|(?:.*?[^\\]+\\(?:\\{2})*\\])))/;case"ESCAPED_DOT":return/((?:^|[^\\])(?:\\{2})*)(\\\.)/;default:throw Error("so far don`t know pattern, named |"+t+"|, mistype?")}},t.prototype.doForgeDots=i(function(t){if(null==t||!r.isRegExp(t))throw Error("must be called with RegExp, but got:\n|in_regexp| = |"+t+"|");return RegExp(this._forgeEscapedDots(this._forgeCharacterSet(t.source)))}),t.prototype._forgeCharacterSet=function(t){var e,n,i=this;return n=RegExp(this.getPatternByName("character_set").source,"g"),e=function(t,e,n){var r;return r=n.replace(/\./g,i._dot_substitute_),e+r},t.replace(n,e)},t.prototype._forgeEscapedDots=function(t){var e,n,i=this;return n=RegExp(this.getPatternByName("escaped_dot").source,"g"),e=function(t,e,n){var r;return r=n.replace(/\\\./,i._dot_substitute_),e+r},t.replace(n,e)},t}(),n.exports=t}).call(this)},"lib/stringificator":function(t,e,n){(function(){var t,i,r,o;r=null!=(o=this._)?o:e("lodash"),i=e("./type_detector").getItType,t=function(){function t(t,e,n,i){this._original_obj_=t,this._internal_path_delimiter_=e,this._regexp_transformation_fn_=n,this._options_=null!=i?i:{},this._cache_stringifyed_object_=null,this._stringification_rule={stubs_list:[],stringify_filter:null},this._max_text_long_=120,this._convert_stringify_filter=!0,this._do_logging_=null!=this._options_.log&&this._options_.log===!0&&null!=("undefined"!=typeof console&&null!==console?console.log:void 0)?!0:!1}return t.prototype.stringifyObject=function(t,e){var n,i,o;return i=this._stringification_rule.stringify_filter,n=this._stringification_rule.stubs_list,t||(t=i),e||(e=n),null!=this._cache_stringifyed_object_&&r.isEqual(t,i)&&r.isEqual(e,n)?(this._do_logging_&&console.log("stringify cache hit"),this._cache_stringifyed_object_):(this._do_logging_&&console.log("stringify cache miss"),o=[t,e],i=o[0],n=o[1],this._cache_stringifyed_object_=this._doStringification(t,e))},t.prototype._doStringification=function(t){var e,n,o,s,_,u;return n=this._makeElementFilter(t),u=this._makeStringLimiter(this._max_text_long_),s=null!=t?n:function(){return!0},e=this._internal_path_delimiter_,_=[],o=function(t,n,l){var a,c,g,h,f,p,d,y,E;switch(c=i(t)){case"HASH":if(h=r.keys(t),h.length)for(p=0,y=h.length;y>p;p++)g=h[p],s(n,g,l)&&o(t[g],""+n+g+e,l+1);else o("__EMPTY__|HASH|",""+n,l);break;case"ARRAY":if(t.length)for(a=d=0,E=t.length;E>d;a=++d)f=t[a],s(n,a,l)&&o(f,""+n+a+e,l+1);else o("__EMPTY__|ARRAY|",""+n,l);break;case"NUMBER":case"BOOLEAN":case"NULL":_.push(""+n+t);break;case"STRING":_.push(u(n,t,l));break;case"DATE":case"REGEXP":_.push(""+n+"__"+c+"__|"+t+"|__");break;default:_.push(""+n+"__"+c+"__")}return null},o(this._original_obj_,"",0),_},t.prototype._makeStringLimiter=function(t){return function(e,n){var i;return i=n.length,i>t?""+e+"__LONG_TEXT__|"+i+"|":""+e+n}},t.prototype._makeElementFilter=function(t){var e,n;return e=null!=(null!=t?t.origin_pattern:void 0)?(n=t.origin_pattern,this._convert_stringify_filter?n=this._regexp_transformation_fn_(n):void 0,function(e,i){return e===t.element_name&&n.test(i)}):function(e){return e===t.element_name},function(n,i,r){return t.apply_on_depth===r?e(i,n):!0}},t}(),n.exports=t}).call(this)},"lib/type_detector":function(t,e,n){(function(){var t,i;t=null!=(i=this._)?i:e("lodash"),n.exports={getItType:function(e){return t.isPlainObject(e)?"HASH":t.isArray(e)?"ARRAY":t.isString(e)?"STRING":t.isNumber(e)?"NUMBER":t.isBoolean(e)?"BOOLEAN":t.isNull(e)?"NULL":t.isFunction(e)?"FUNCTION":t.isRegExp(e)?"REGEXP":t.isDate(e)?"DATE":t.isArguments(e)?"ARGUMENTS":"OTHER"}}}).call(this)},tinydata:function(t,e,n){(function(){var t,i,r,o,s,_,u,l=function(t,e){return function(){return t.apply(e,arguments)}};s=function(t,e){return function(){var n;return this._do_timing_&&console.time(t),n=e.apply(this,arguments),this._do_timing_&&console.timeEnd(t),n}},_=null!=(u=this._)?u:e("lodash"),t=e("./lib/regexp_dot_forger"),i=e("./lib/stringificator"),o=e("./lib/type_detector").getItType,r=function(){function e(e,n){this._original_obj_=null!=e?e:{},this._options_=null!=n?n:{},this._buildCollectorLayout=l(this._buildCollectorLayout,this),this.doTransormRegExp=l(this.doTransormRegExp,this),null!=this._options_.debug&&this._options_.debug===!0&&(this._options_.timing=!0,this._options_.logging=!0,this._do_warning_=!0),this._do_timing_=null!=this._options_.timing&&this._options_.timing===!0&&null!=("undefined"!=typeof console&&null!==console?console.time:void 0)?!0:!1,this._do_logging_=null!=this._options_.logging&&this._options_.logging===!0&&null!=("undefined"!=typeof console&&null!==console?console.log:void 0)?!0:!1,this._do_warning_=null!=this._options_.warning&&this._options_.warning===!0&&null!=("undefined"!=typeof console&&null!==console?console.warn:void 0)?!0:!1,this._dot_={internal:"ï¹…",external:"."},this._dot_decorator_settings_={rakeAny:{convert_income_rake_regexp:!0,convert_before_finalize_function:!0,convert_out_result:!0}},this._dot_forger_=new t(this.getPathDelimiter("internal"),{log:this._do_logging_}),this._stringificator_=new i(this._original_obj_,this.getPathDelimiter("internal"),this.doTransormRegExp,{log:this._do_logging_})}return e.prototype.seekOut=function(t,e,n){return null==n&&(n={}),_.defaults(n,{key:1,value:2}),this._do_warning_&&n.key>=n.value&&console.warn("for reverse interpretation direction it would be better to use #seekOutVerso()\n|key_order|   = |"+n.key+"|\n|value_order| = |"+n.value+"|"),this._seekOutAny(t,e,n)},e.prototype.seekOutVerso=function(t,e,n){return null==n&&(n={}),_.defaults(n,{key:2,value:1}),this._do_warning_&&n.value>=n.key&&console.warn("for direct interpretation direction it would be better to use #seekOut()\n|key_order|   = |"+n.key+"|\n|value_order| = |"+n.value+"|"),this._seekOutAny(t,e,n)},e.prototype.rakeStringify=s("rakeStringify",function(t,e){return null==e&&(e=[]),this._stringificator_.stringifyObject(t,e)}),e.prototype.doTransormRegExp=function(t){return-1!==t.source.indexOf(this.getPathDelimiter("internal"))?(this._do_logging_&&console.log("doTransormRegExp: skip converting for |"+t+"|"),t):this._dot_forger_.doForgeDots(t)},e.prototype.getPathDelimiter=function(t){switch(t.toUpperCase()){case"INTERNAL":return this._dot_.internal;case"EXTERNAL":return this._dot_.external;default:throw Error("so far don`t know path delimiter, named |"+t+"|, mistype?")}},e.prototype._seekOutAny=function(t,e,n){var i,r,o,s,_,u,l,a;return a=this._argParser(t,"rake_rule"),_=a[0],s=a[1],o=this._buildRakeFunction(_,s,n),l=this.rakeStringify(),u=this._proceedSeekingOut(o,l),(i=this._getFinalizationName(e))?(r=this._prepareFinalization(i,e),r(u)):u},e.prototype._getFinalizationName=function(t){var e;if(e=!1,null!=t&&this._argParser(t,"finalize_function","Function")){if(this._dot_decorator_settings_.rakeAny.convert_before_finalize_function)return"DECORATE_THEN_FINALAZE";e=!0}return this._dot_decorator_settings_.rakeAny.convert_out_result?e?"FINALAZE_THEN_DECORATE":"DECORATE":void 0},e.prototype._prepareFinalization=function(t,e){var n,i;switch(n=this._buildResultConvertor(),i=this._buildUserFinalizer(e),t){case"DECORATE":return function(t){return n(t)};case"FINALAZE_THEN_DECORATE":return function(t){return n(i(t))};case"DECORATE_THEN_FINALAZE":return function(t){return i(n(t))};default:throw Error("WTF???!!!")}},e.prototype._makeBuffingDelimiterWeel=function(){var t,e,n;return n=this.getPathDelimiter("external"),e=this.getPathDelimiter("internal"),t=RegExp(e,"g"),function(i){var r;return"STRING"!==o(i)?i:(r=e===i.charAt(i.length-1)?i.slice(0,-1):i,r.replace(t,n))}},e.prototype._buildResultConvertor=function(){var t;return t=this._makeBuffingDelimiterWeel(),function(e){var n,i,r,o,s,u,l,a,c,g,h;for(s={},g=_.keys(e),u=0,a=g.length;a>u;u++)for(r=g[u],o=t(r),s[o]=Array(e[r].length),h=e[r],n=l=0,c=h.length;c>l;n=++l)i=h[n],s[o][n]=t(i);return s}},e.prototype._buildUserFinalizer=function(t){return this._buildCollectorLayout(t)},e.prototype._proceedSeekingOut=s("seekingOut",function(t,e){var n;return n=t(e)}),e.prototype._buildEmitCollector=function(t){return function(e,n){var i;return null!=e&&null!=n?(null==(i=t[e])&&(t[e]=[]),t[e].push(n),null):void 0}},e.prototype._buildCollectorLayout=function(t){var e=this;return function(n){var i,r,s,u,l,a,c,g,h,f;switch(l={},r=e._buildEmitCollector(l),i=o(n)){case"ARRAY":for(a=0,g=n.length;g>a;a++)s=n[a],t.call(e,s,r);break;case"HASH":for(f=_.keys(n),c=0,h=f.length;h>c;c++)u=f[c],t.call(e,u,n[u],r);break;default:throw Error("cant work with object type |"+i+"|")}return l}},e.prototype._buildRakeFunction=function(t,e,n){switch(t){case"REGEXP":return this._dot_decorator_settings_.rakeAny.convert_income_rake_regexp&&(e=this.doTransormRegExp(e)),this._buildCollectorLayout(function(t,i){var r;return(r=t.match(e))?(i(r[n.key],r[n.value]),null):void 0});case"FUNCTION":return this._buildCollectorLayout(e);default:throw Error("WTF???!!")}},e.prototype._argParser=function(t,e,n){var i,r,s;if(r=function(n,i){return""+n+"\n|arg_name| = |"+e+"|\n|type| = |"+i+"|\n|arg|   = |"+t+"|"},s=function(){switch(i=o(t)){case"STRING":try{return["REGEXP",RegExp(t)]}catch(e){throw SyntaxError(r("cant compile this String to RegExp",i))}break;case"REGEXP":return["REGEXP",t];case"FUNCTION":return["FUNCTION",t];default:throw TypeError(r("argument must be String, RegExp or Function, but got",i))}}(),null!=n&&s[0]!==n.toUpperCase())throw TypeError(r("argument must be "+n+", but got",i));return s},e}(),n.exports=r}).call(this)}});