(function(){if(!this.require){var t={},e={},n=function(o,s){var l,u=i(s,o),_=e[u];if(_)return _.exports;if(!(l=t[u]||t[u=i(u,"./index")]))throw"module '"+o+"' not found";_={id:u,exports:{}};try{return e[u]=_,l(_.exports,function(t){return n(t,r(u))},_),_.exports}catch(a){throw delete e[u],a}},i=function(t,e){var n,i,r=[];n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var o=0,s=n.length;s>o;o++)i=n[o],".."==i?r.pop():"."!=i&&""!=i&&r.push(i);return r.join("/")},r=function(t){return t.split("/").slice(0,-1).join("/")};this.require=function(t){return n(t,"")},this.require.define=function(e){for(var n in e)t[n]=e[n]}}return this.require.define}).call(this)({"lib/finalizer":function(t,e,n){(function(){var t,i,r,o,s,l,u,_={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)_.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};l=null!=(u=this._)?u:e("lodash"),s=e("./type_detector").getItType,o=e("./mixin_supported"),t=e("../mixin/arg_parser"),i=e("../mixin/collector"),r=function(e){function n(t,e,n){this._internal_path_delimiter_=t,this._extarnal_dot_sign_=e,this._options_=null!=n?n:{},this._convert_before_finalize_function_=!0,this._convert_out_result_=!0}return a(n,e),n.include(t),n.include(i),n.prototype.finalizeResult=function(t,e){var n,i;return(n=this._getFinalizationName(t))?(i=this._prepareFinalization(n,t),i(e)):e},n.prototype._getFinalizationName=function(t){var e;if(e=!1,null!=t&&this._argParser(t,"finalize_function","Function")){if(this._convert_before_finalize_function_)return"DECORATE_THEN_FINALAZE";e=!0}return this._convert_out_result_?e?"FINALAZE_THEN_DECORATE":"DECORATE":void 0},n.prototype._prepareFinalization=function(t,e){var n,i;switch(n=this._buildResultConvertor(),i=this._buildUserFinalizer(e),t){case"DECORATE":return function(t){return n(t)};case"FINALAZE_THEN_DECORATE":return function(t){return n(i(t))};case"DECORATE_THEN_FINALAZE":return function(t){return i(n(t))};default:throw Error("WTF???!!!")}},n.prototype._makeBuffingDelimiterWeel=function(){var t,e,n;return n=this._extarnal_dot_sign_,e=this._internal_path_delimiter_,t=RegExp(e,"g"),function(i){var r;return"STRING"!==s(i)?i:(r=e===i.charAt(i.length-1)?i.slice(0,-1):i,r.replace(t,n))}},n.prototype._buildResultConvertor=function(){var t;return t=this._makeBuffingDelimiterWeel(),function(e){var n,i,r,o,s,u,_,a,c,h,p;for(s={},h=l.keys(e),u=0,a=h.length;a>u;u++)for(r=h[u],o=t(r),s[o]=Array(e[r].length),p=e[r],n=_=0,c=p.length;c>_;n=++_)i=p[n],s[o][n]=t(i);return s}},n.prototype._buildUserFinalizer=function(t){return this._buildCollectorLayout(t)},n}(o),n.exports=r}).call(this)},"lib/log_state":function(t,e,n){(function(){var t;t=function(){function t(t){this._options_=null!=t?t:{},this._state_={},null!=this._options_.debug&&this._options_.debug===!0?(this._state_.DEBUGGING=!0,this._options_.timing=!0,this._options_.logging=!0,this._options_.warning=!0):this._state_.debug=!1,this._state_.TIMING=null!=this._options_.timing&&this._options_.timing===!0&&null!=("undefined"!=typeof console&&null!==console?console.time:void 0)?!0:!1,this._state_.LOGGING=null!=this._options_.logging&&this._options_.logging===!0&&null!=("undefined"!=typeof console&&null!==console?console.log:void 0)?!0:!1,this._state_.WARNING=null!=this._options_.warning&&this._options_.warning===!0&&null!=("undefined"!=typeof console&&null!==console?console.warn:void 0)?!0:!1}return t.prototype.mustDo=function(t){var e;if(e=t.toUpperCase(),null==this._state_[e])throw Error("dont know |"+t+"| state");return this._state_[e]},t}(),n.exports=t}).call(this)},"lib/mixin_supported":function(t,e,n){(function(){var t,e,i=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=["extended","included"],t=function(){function t(){}return t.extend=function(t){var n,r,o;for(n in t)r=t[n],0>i.call(e,n)&&(this[n]=r);return null!=(o=t.extended)&&o.apply(this),this},t.include=function(t){var n,r,o;for(n in t)r=t[n],0>i.call(e,n)&&(this.prototype[n]=r);return null!=(o=t.included)&&o.apply(this),this},t}(),n.exports=t}).call(this)},"lib/regexp_dot_forger":function(t,e,n){(function(){var t,i,r,o,s=[].slice;i=function(t){return function(){var e,n;return e=arguments.length>=1?s.call(arguments,0):[],n=t.apply(this,e),this._do_logging_&&console.log(""+e[0]+" -> "+n),n}},r=null!=(o=this._)?o:e("lodash"),t=function(){function t(t,e){if(this._dot_substitute_=t,this._options_=null!=e?e:{},null==this._dot_substitute_||!r.isString(this._dot_substitute_))throw Error("constructor must be called with string as dot substitute, but got:\n|dot_substitute| = |"+this._dot_substitute_+"|");this._do_logging_=null!=this._options_.log&&this._options_.log===!0&&null!=("undefined"!=typeof console&&null!==console?console.log:void 0)?!0:!1}return t.prototype.getPatternByName=function(t){switch(t.toUpperCase()){case"CHARACTER_SET":return/((?:^|(?:(?:^|[^\\])\\(?:\\{2})*\\)|[^\\]+))(\[(?:]|(?:[^\\]+])|(?:.*?[^\\]+])|(?:.*?[^\\]+\\(?:\\{2})*\\])))/;case"ESCAPED_DOT":return/((?:^|[^\\])(?:\\{2})*)(\\\.)/;default:throw Error("so far don`t know pattern, named |"+t+"|, mistype?")}},t.prototype.doForgeDots=i(function(t){if(null==t||!r.isRegExp(t))throw Error("must be called with RegExp, but got:\n|in_regexp| = |"+t+"|");return RegExp(this._forgeEscapedDots(this._forgeCharacterSet(t.source)))}),t.prototype._forgeCharacterSet=function(t){var e,n,i=this;return n=RegExp(this.getPatternByName("character_set").source,"g"),e=function(t,e,n){var r;return r=n.replace(/\./g,i._dot_substitute_),e+r},t.replace(n,e)},t.prototype._forgeEscapedDots=function(t){var e,n,i=this;return n=RegExp(this.getPatternByName("escaped_dot").source,"g"),e=function(t,e,n){var r;return r=n.replace(/\\\./,i._dot_substitute_),e+r},t.replace(n,e)},t}(),n.exports=t}).call(this)},"lib/stringificator":function(t,e,n){(function(){var t,i,r,o;r=null!=(o=this._)?o:e("lodash"),i=e("./type_detector").getItType,t=function(){function t(t,e,n,i){this._original_obj_=t,this._internal_path_delimiter_=e,this._regexp_transformation_fn_=n,this._options_=null!=i?i:{},this._cache_stringifyed_object_=null,this._stringification_rule={stubs_list:[],stringify_filter:null},this._max_text_long_=120,this._convert_stringify_filter=!0,this._do_logging_=null!=this._options_.log&&this._options_.log===!0&&null!=("undefined"!=typeof console&&null!==console?console.log:void 0)?!0:!1}return t.prototype.stringifyObject=function(t,e){var n,i,o;return i=this._stringification_rule.stringify_filter,n=this._stringification_rule.stubs_list,t||(t=i),e||(e=n),null!=this._cache_stringifyed_object_&&r.isEqual(t,i)&&r.isEqual(e,n)?(this._do_logging_&&console.log("stringify cache hit"),this._cache_stringifyed_object_):(this._do_logging_&&console.log("stringify cache miss"),o=[t,e],i=o[0],n=o[1],this._cache_stringifyed_object_=this._doStringification(t,e))},t.prototype._doStringification=function(t){var e,n,o,s,l,u;return n=this._makeElementFilter(t),u=this._makeStringLimiter(this._max_text_long_),s=null!=t?n:function(){return!0},e=this._internal_path_delimiter_,l=[],o=function(t,n,_){var a,c,h,p,g,f,d,y,m;switch(c=i(t)){case"HASH":if(p=r.keys(t),p.length)for(f=0,y=p.length;y>f;f++)h=p[f],s(n,h,_)&&o(t[h],""+n+h+e,_+1);else o("__EMPTY__|HASH|",""+n,_);break;case"ARRAY":if(t.length)for(a=d=0,m=t.length;m>d;a=++d)g=t[a],s(n,a,_)&&o(g,""+n+a+e,_+1);else o("__EMPTY__|ARRAY|",""+n,_);break;case"NUMBER":case"BOOLEAN":case"NULL":l.push(""+n+t);break;case"STRING":l.push(u(n,t,_));break;case"DATE":case"REGEXP":l.push(""+n+"__"+c+"__|"+t+"|__");break;default:l.push(""+n+"__"+c+"__")}return null},o(this._original_obj_,"",0),l},t.prototype._makeStringLimiter=function(t){return function(e,n){var i;return i=n.length,i>t?""+e+"__LONG_TEXT__|"+i+"|":""+e+n}},t.prototype._makeElementFilter=function(t){var e,n;return e=null!=(null!=t?t.origin_pattern:void 0)?(n=t.origin_pattern,this._convert_stringify_filter?n=this._regexp_transformation_fn_(n):void 0,function(e,i){return e===t.element_name&&n.test(i)}):function(e){return e===t.element_name},function(n,i,r){return t.apply_on_depth===r?e(i,n):!0}},t}(),n.exports=t}).call(this)},"lib/type_detector":function(t,e,n){(function(){var t,i;t=null!=(i=this._)?i:e("lodash"),n.exports={getItType:function(e){return t.isPlainObject(e)?"HASH":t.isArray(e)?"ARRAY":t.isString(e)?"STRING":t.isNumber(e)?"NUMBER":t.isBoolean(e)?"BOOLEAN":t.isNull(e)?"NULL":t.isFunction(e)?"FUNCTION":t.isRegExp(e)?"REGEXP":t.isDate(e)?"DATE":t.isArguments(e)?"ARGUMENTS":"OTHER"}}}).call(this)},"mixin/arg_parser":function(t,e,n){(function(){var t,i;t=e("../lib/type_detector").getItType,n.exports=i={_argParser:function(e,n,i){var r,o,s;if(o=function(t,i){return""+t+"\n|arg_name| = |"+n+"|\n|type| = |"+i+"|\n|arg|   = |"+e+"|"},s=function(){switch(r=t(e)){case"STRING":try{return["REGEXP",RegExp(e)]}catch(n){throw SyntaxError(o("cant compile this String to RegExp",r))}break;case"REGEXP":return["REGEXP",e];case"FUNCTION":return["FUNCTION",e];default:throw TypeError(o("argument must be String, RegExp or Function, but got",r))}}(),null!=i&&s[0]!==i.toUpperCase())throw TypeError(o("argument must be "+i+", but got",r));return s}}}).call(this)},"mixin/collector":function(t,e,n){(function(){var t,i,r,o;r=null!=(o=this._)?o:e("lodash"),t=e("../lib/type_detector").getItType,n.exports=i={_buildEmitCollector:function(t){return function(e,n){var i;return null!=e&&null!=n?(null==(i=t[e])&&(t[e]=[]),t[e].push(n),null):void 0}},_buildCollectorLayout:function(e){var n=this;return function(i){var o,s,l,u,_,a,c,h,p,g;switch(_={},s=n._buildEmitCollector(_),o=t(i)){case"ARRAY":for(a=0,h=i.length;h>a;a++)l=i[a],e.call(n,l,s);break;case"HASH":for(g=r.keys(i),c=0,p=g.length;p>c;c++)u=g[c],e.call(n,u,i[u],s);break;default:throw Error("cant work with object type |"+o+"|")}return _}}}}).call(this)},tinydata:function(t,e,n){(function(){var t,i,r,o,s,l,u,_,a,c,h,p,g=function(t,e){return function(){return t.apply(e,arguments)}},f={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};c=function(t,e){return function(){var n;return this._logger_.mustDo("timing")&&console.time(t),n=e.apply(this,arguments),this._logger_.mustDo("timing")&&console.timeEnd(t),n}},h=null!=(p=this._)?p:e("lodash"),l=e("./lib/regexp_dot_forger"),u=e("./lib/stringificator"),o=e("./lib/log_state"),r=e("./lib/finalizer"),a=e("./lib/type_detector").getItType,s=e("./lib/mixin_supported"),t=e("./mixin/arg_parser"),i=e("./mixin/collector"),_=function(e){function n(t,e){this._original_obj_=null!=t?t:{},this._options_=null!=e?e:{},this.doTransormRegExp=g(this.doTransormRegExp,this),this._dot_={internal:"﹅",external:"."},this._convert_income_seek_regexp_=!0,this._logger_=new o(this._options_),this._dot_forger_=new l(this.getPathDelimiter("internal"),{log:this._logger_.mustDo("logging")}),this._stringificator_=new u(this._original_obj_,this.getPathDelimiter("internal"),this.doTransormRegExp,{log:this._logger_.mustDo("logging")}),this._finalizer_=new r(this.getPathDelimiter("internal"),this.getPathDelimiter("external"))}return d(n,e),n.include(t),n.include(i),n.prototype.seekOut=function(t,e,n){return null==n&&(n={}),h.defaults(n,{key:1,value:2}),this._logger_.mustDo("warning")&&n.key>=n.value&&console.warn("for reverse interpretation direction it would be better to use #seekOutVerso()\n|key_order|   = |"+n.key+"|\n|value_order| = |"+n.value+"|"),this._seekOutAny(t,e,n)},n.prototype.seekOutVerso=function(t,e,n){return null==n&&(n={}),h.defaults(n,{key:2,value:1}),this._logger_.mustDo("warning")&&n.value>=n.key&&console.warn("for direct interpretation direction it would be better to use #seekOut()\n|key_order|   = |"+n.key+"|\n|value_order| = |"+n.value+"|"),this._seekOutAny(t,e,n)},n.prototype.rakeStringify=c("rakeStringify",function(t,e){return null==e&&(e=[]),this._stringificator_.stringifyObject(t,e)}),n.prototype.doTransormRegExp=function(t){return-1!==t.source.indexOf(this.getPathDelimiter("internal"))?(this._logger_.mustDo("logging")&&console.log("doTransormRegExp: skip converting for |"+t+"|"),t):this._dot_forger_.doForgeDots(t)},n.prototype.getPathDelimiter=function(t){switch(t.toUpperCase()){case"INTERNAL":return this._dot_.internal;case"EXTERNAL":return this._dot_.external;default:throw Error("so far don`t know path delimiter, named |"+t+"|, mistype?")}},n.prototype.getDataByPath=function(t,e,n){var i;return null==e&&(e=this._original_obj_),n||(n=-1!==(null!=t?t.indexOf(this.getPathDelimiter("internal")):void 0)?this.getPathDelimiter("internal"):this.getPathDelimiter("external")),i=t.split(n),h.reduce(i,function(t,e){return t[e]},e)},n.prototype._seekOutAny=function(t,e,n){var i,r,o,s,l,u;return l=this.rakeStringify(),u=this._argParser(t,"seek_rule"),s=u[0],o=u[1],r=this._buildSeekFunction(s,o,n),i=this._proceedSeekingOut(r,l),this._proceedFinalization(e,i)},n.prototype._proceedFinalization=c("finalization",function(t,e){return this._finalizer_.finalizeResult(t,e)}),n.prototype._proceedSeekingOut=c("seekingOut",function(t,e){return t(e)}),n.prototype._buildSeekFunction=function(t,e,n){switch(t){case"REGEXP":return this._convert_income_seek_regexp_&&(e=this.doTransormRegExp(e)),this._buildCollectorLayout(function(t,i){var r;return(r=t.match(e))?(i(r[n.key],r[n.value]),null):void 0});case"FUNCTION":return this._buildCollectorLayout(e);default:throw Error("WTF???!!")}},n}(s),n.exports=_}).call(this)}});